<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="../css/dashboard.css" />
  </head>
  <body>
    <header>
      <div class="header-container">
        <div class="logo-container">
          <img src="../../images/logo1.png" alt="PageTurners Logo" class="logo" />
          <span class="site-title">PageTurners</span>
        </div>
        <nav class="nav-container">
          <ul class="nav-list">
            <li><a href="dashboard.html">Home</a></li>
            <!-- <li class="dropdown">
              <a href="MyClubs.html">My Clubs</a>
              <ul class="dropdownmenu" id="userdropdownmenu">
                <li><a href="overview.html">My Club Creation</a></li>
                <li><a href="club.html">Create my Club</a></li>
              </ul>
            </li> -->

            <li>
              <a href="MyClubs.html"><button class="loginbutton">My Clubs</button></button></a>
              <a href="club.html"><button class="loginbutton">Create A Club</button></button></a>
              <a href="join.html"><button class="loginbutton">Join</button></a>
              <a href="logout.html"><button class="loginbutton">Logout</button></a>
            </li>


            <li class="user-dropdown">
              <img
                src="https://img.icons8.com/ios-glyphs/30/000000/user.png"
                alt="User Icon"
                class="user-icon"
                onclick="toggleDropdown()"
              />
              <ul class="dropdown-menu" id="user-dropdown-menu">
                <li><a href="#">Discussions</a></li>
                <li><a href="#">Account</a></li>
                <li><a href="verify-email.html">Verify Email</a></li>
                <li><a href="logout.html">Logout</a></li>
              </ul>
            </li>
            <script>
              function closeAllDropdowns() {
                document
                  .querySelectorAll(".dropdown.open, .user-dropdown.open")
                  .forEach((dropdown) => {
                    dropdown.classList.remove("open");
                  });
              }
document
                .querySelector(".dropdown > a")
                .addEventListener("click", function (event) {
                  event.preventDefault();
                  closeAllDropdowns(); // Close any other open dropdown
                  const dropdown = document.querySelector(".dropdown");
                  dropdown.classList.toggle("open"); // Toggle the clicked dropdown
                });
              document
                .querySelector(".user-icon")
                .addEventListener("click", function () {
                  closeAllDropdowns(); // Close any other open dropdown
                  const userDropdown = document.querySelector(".user-dropdown");
                  userDropdown.classList.toggle("open"); // Toggle the clicked dropdown
                });
              document.addEventListener("click", function (event) {
                const isClickInsideDropdown = event.target.closest(
                  ".dropdown, .user-dropdown"
                );

                if (!isClickInsideDropdown) {
                  closeAllDropdowns(); // Close all dropdowns if clicked outside
                }
              });
            </script>
            <li>
              

              <!-- Collapsible Search bar with magnifying glass -->
             <div class="search-form" id="search-form" >
                <input
                  type="text"
                  name="query"
                  placeholder="Search for books, clubs, or authors"
                  class="search-input"
                  id="search-input"
                  
                />
                <ul id="suggestions-list" class= "suggestions-list"> </ul>
                <button
                  type="button"
                  class="search-button"
                  onclick="toggleSearch()"
                >
                  <img
                    src="https://img.icons8.com/ios-glyphs/30/000000/search.png"
                    alt="Search"
                    class="search-icon"
                  />
                </button>
              </form>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    


    <!-- Edge-to-edge Image Carousel Section -->
    <section class="image-carousel">
      <div class="carousel">
        <img id="carousel-image" src="../../images/first1.png" alt="First Picture" />
      </div>
      <div class="carousel-controls">
        <span class="dot" onclick="changeImage(1)"></span>
        <span class="dot" onclick="changeImage(2)"></span>
        <span class="dot" onclick="changeImage(3)"></span>
        <span class="dot" onclick="changeImage(4)"></span>
        <span class="dot" onclick="changeImage(5)"></span>
        <span class="dot" onclick="changeImage(6)"></span>
        <span class="dot" onclick="changeImage(7)"></span>
        <span class="dot" onclick="changeImage(8)"></span>
        <span class="dot" onclick="changeImage(9)"></span>
        <span class="dot" onclick="changeImage(10)"></span>
      </div>
    </section>

   <main>
      <section class="genres-section">
        <div class="section-header">
          <h3>Our Book Genres</h3>
           <a href="browse.html" class="browse-allbutton">Browse All</a>
        </div>

       <div class="genres-grid">
  <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=fiction'">
    <img src="../../images/fiction.jpeg" alt="Fiction" />
    <h4>Fiction</h4>


</div>
  <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=non-fiction'">
    <img src="../../images/non-fiction.jpg" alt="Non-fiction" />
    <h4>Non-fiction</h4>
  
</div>
  <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=fantasy'">
    <img src="../../images/fantasy.jpg" alt="Fantasy" />
    <h4>Fantasy</h4>
  </div>
 

          <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=action'">
            <img src="../../images/action.jpeg" alt="Action" />
            <h4>Action</h4>
          </div>
          <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=adventure'">
            <img src="../../images/adventure.jpeg" alt="Adventure" />
            <h4>Adventure</h4>
          </div>
          <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=drama'">
            <img src="../../images/drama.jpeg" alt="Drama" />
            <h4>Drama</h4>
          </div>
          <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=romance'">
            <img src="../../images/romance.jpeg" alt="Romance" />
            <h4>Romance</h4>
          </div>
          <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=historical'">
            <img src="../../images/historical.jpg" alt="Historical" />
            <h4>Historical</h4>
          </div>
          <div class="genre-card" onclick="window.location.href='/public/webpages/html/results.html?q=crime'">
            <img src="../../images/crime.jpeg" alt="Crime" />
            <h4>Crime</h4>
          </div>
        </div>
      </section>

      
         <section class="featured-books">
  <div class="section-header">
    <h3>Featured Books</h3>
     <a href="browse.html" class="browse-allbutton">Browse All</a>
  </div>
    

  <div class="books-grid" id="featured-books-container">
  </div>
</section>

      <section class="book-clubs">
        <div class="section-header">
          <h3>Trending Book Clubs</h3>
          <a href="#" class="browse-allbutton">Browse All</a>
        </div>
        <div class="clubs-grid">
          <div class="club-card">
            <img src="../../images/bookclub1.jpeg" alt="Book Club 1" />
            <h4>Lily's Book Club</h4>
            <p>5 members</p>
          </div>
          <div class="club-card">
            <img src="../../images/bookclub2.jpeg" alt="Book Club 2" />
            <h4>The Authors Club</h4>
            <p>3 members</p>
          </div>
          <div class="club-card">
            <img src="../../images/bookclub3.jpeg" alt="Book Club 3" />
            <h4>We love books</h4>
            <p>10 members</p>
          </div>
        </div>
      </section>

      <!-- Trending Group Discussions Section -->
      <section class="trending-groups">
        <div class="section-header">
          <h3>Trending Group Discussions</h3>
          <a href="discussion.html?id=1" class="joinbutton">Join</a>
        </div>
        <div class="trending-scroll">
          <div class="trending-card">
            <img
              src="../../images/trendinggroupdiscussion1.jpeg"
              alt="Trending Group Discussion 1"
            />
            <div class="trending-content">
              <h4>Why do we read books?</h4>
              <p>10 replies</p>
              <a href="discussion.html?id=2" class="joinbutton">Join</a>
            </div>
          </div>
          <div class="trending-card">
            <img
              src="../../images/trendinggroupdiscussion2.jpeg"
              alt="Trending Group Discussion 2"
            />
            <div class="trending-content">
              <h4>We are all different</h4>
              <p>5 replies</p>
              <a href="discussion.html?id=3" class="joinbutton">Join</a>
            </div>
          </div>
          <div class="trending-card">
            <img
              src="../../images/trendinggroupdiscussion3.webp"
              alt="Trending Group Discussion 3"
            />
            <div class="trending-content">
              <h4>What did you learn from this book?</h4>
              <p>8 replies</p>
              <a href="discussion.html?id=4" class="joinbutton">Join</a> 
            </div>
          </div>
          <div class="trending-card">
            <img
              src="../../images/trendinggroupdiscussion4.jpeg"
              alt="Trending Group Discussion 4"
            />
            <div class="trending-content">
              <h4>Was Frankenstein book satisfying to read?</h4>
              <p>5 replies</p>
              <a href="discussion.html?id=5" class="joinbutton">Join</a>
            </div>
          </div>
          <div class="trending-card">
            <img
              src="../../images/trendinggroupdiscussion5.jpeg"
              alt="Trending Group Discussion 5"
            />
            <div class="trending-content">
              <h4>
                What are some interesting quotes that have stood out to you from
                a book?
              </h4>
              <p>4 replies</p>
              <a href="discussion.html?id=6" class="joinbutton">Join</a>
            </div>
          </div>
        </div>
      </section>
    </main>

     <section class="top-recommendations">
  <h3>Top 3 Recommendations for You</h3>
  <div class="recommendations-grid" id="recommendations-container">
   
  </div>
</section>
    <script>
      const images = [
        "../../images/first1.png",
        "../../images/second2.jpg",
        "../../images/third3.jpg",
        "../../images/fourth4.webp",
        "../../images/fifth5.jpg",
        "../../images/sixth6.jpg",
        "../../images/seventh7.jpeg",
        "../../images/eigth8.jpg",
        "../../images/ninth9.jpg",
        "../../images/tenth10.jpg",
      ];

      function changeImage(index) {
        document.getElementById("carousel-image").src = images[index - 1];
      }

      // JavaScript function to toggle the search input visibility
      function toggleSearch() {
        const searchInput = document.getElementById("search-input");
        if (
          searchInput.style.display === "none" ||
          searchInput.style.display === ""
        ) {
          searchInput.style.display = "block";
          searchInput.style.width = "200px"; // Expand search bar
          searchInput.focus(); // Focus on input when displayed
        } else {
          searchInput.style.display = "none";
        }
      }
async function fetchTopRecommendations() {
  const API_KEY = 'AIzaSyDHChLI4vatYILeQOWr24nHr4kSap9dwAM';  // Replace with your actual API key
  const API_URL = `https://www.googleapis.com/books/v1/volumes?q=fiction&maxResults=3&key=${API_KEY}`;

  try {
    const response = await fetch(API_URL);
    const data = await response.json();

    const recommendationsContainer = document.getElementById('recommendations-container');
    recommendationsContainer.innerHTML = ''; // Clear any previous content

    if (data.items) {
      data.items.slice(0, 3).forEach((book, index) => {
        const bookItem = document.createElement('div');
        bookItem.classList.add('recommendation-item');

        const number = document.createElement('span');
        number.classList.add('number');
        number.textContent = index + 1;

        const link = document.createElement('a');
        link.href = `https://books.google.com/books?id=${book.id}`;
        link.target = "_blank"; // Open in a new tab

        const image = document.createElement('img');
        image.src = book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail : '../../images/placeholder.jpg';
        image.alt = book.volumeInfo.title;

        link.appendChild(image);
        bookItem.appendChild(number);
        bookItem.appendChild(link);
        recommendationsContainer.appendChild(bookItem);
      });
    } else {
      console.log("No items found in the response.");
    }
  } catch (error) {
    console.error('Error fetching book data:', error);
  }
}

async function fetchFeaturedBooks() {
  const API_KEY = 'AIzaSyDHChLI4vatYILeQOWr24nHr4kSap9dwAM';  // Replace with your actual API key
  const API_URL = `https://www.googleapis.com/books/v1/volumes?q=fiction&maxResults=10&key=${API_KEY}`;

  try {
    const response = await fetch(API_URL);
    const data = await response.json();

    const featuredBooksContainer = document.getElementById('featured-books-container');
    featuredBooksContainer.innerHTML = ''; // Clear any previous content

    if (data.items) {
      data.items.forEach((book) => {
        const bookCard = document.createElement('div');
        bookCard.classList.add('book-card');

        const link = document.createElement('a');
        link.href = `https://books.google.com/books?id=${book.id}`;
        link.target = "_blank"; // Open in a new tab

        const image = document.createElement('img');
        image.src = book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail : '../../images/placeholder.jpg';
        image.alt = book.volumeInfo.title;

        link.appendChild(image);
        bookCard.appendChild(link);
        featuredBooksContainer.appendChild(bookCard);
      });
    } else {
      console.log("No items found in the response.");
    }
  } catch (error) {
    console.error('Error fetching books:', error);
  }
}

fetchTopRecommendations();
fetchFeaturedBooks();

    </script>

    <footer>
      <p>&copy; 2024 PageTurners. All Rights Reserved.</p>
    </footer>
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore-compat.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-analytics.js";
        import {getAuth } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";
        import firebase from "firebase/compat/app";
        // Required for side-effects
        import "firebase/firestore";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAt-SInlPaL2FzwtXrRltIEiV5l8k5HMjg",
          authDomain: "pageturners-a831a.firebaseapp.com",
          projectId: "pageturners-a831a",
          storageBucket: "pageturners-a831a.appspot.com",
          messagingSenderId: "304224952392",
          appId: "1:304224952392:web:f33dbc84b481e39a44787d",
          measurementId: "G-C6DKQSJ1R8"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        const auth = getAuth(app);
        const db = getFirestore(app);
        
        
      </script>
    <script type="module" src="scripts/auth1.js"> </script>
    <script src="../../scripts/search.js"></script>
  </body>

</html>


<!--This is just a differential, trying something-->